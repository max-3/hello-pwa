<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Hello World</title>
    <!-- <link rel="manifest" href="//max-3.github.io/pwa/manifest.json"> -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <!-- <link rel="apple-touch-icon" href="images/hello-icon-152.png"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="red" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Hello World" />
    <!-- <meta name="msapplication-TileImage" content="images/hello-icon-144.png"> -->
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <!-- <link rel="manifest" href="manifest.json" /> -->
  </head>
  <body class="fullscreen">
    <div class="container">
      <h1 class="title">Hello World!</h1>
    </div>
    <!-- <script src="js/main.js"></script> -->
    <script>
      let fest = document.createElement("link");
      let url = "//max-3.github.io/pwa/manifest.json";
      fest.rel = "manifest";
      fest.href = `${url}`;
      document.head.append(fest);
      
      
      
      
      
      
      /*******************************************************************/
      console.clear();
// URL.createObjectURL
window.URL = window.URL || window.webkitURL;

// "Server response", used in all examples
var responseOLD = "self.onmessage=function(e){postMessage('Worker: '+e.data);}";
var response = `
var cacheName = 'hello-pwa';
var filesToCache = [
  './',
  './index.html',
  // './css/style.css',
  // './js/main.js'
];

/* Start the service worker and cache all of the app's content */
self.addEventListener('install', function(e) {
  e.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return cache.addAll(filesToCache);
    })
  );
});

/* Serve cached content when offline */
self.addEventListener('fetch', function(e) {
  e.respondWith(
    caches.match(e.request).then(function(response) {
      return response || fetch(e.request);
    })
  );
});
    console.log('游리游리游리游리');
`;
   
var blob;
try {
    blob = new Blob([response], {type: 'application/javascript'});
} catch (e) { // Backwards-compatibility
    window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
    blob = new BlobBuilder();
    blob.append(response);
    blob = blob.getBlob();
}
var m3url = URL.createObjectURL(blob);
console.log("游볫",m3url   );
//var worker = new Worker(m3url);
      /*******************************************************************/
      window.onload = () => {
        "use strict";

        if ("serviceWorker" in navigator) {
          navigator.serviceWorker.register(
            m3url
           // "//output.jsbin.com/somubet.js"
           // "//max-3.github.io/pwa/worker.js"
            
          );
          // navigator.serviceWorker.register("./service-w5.js");
        }
      };
    </script>
  </body>
</html>
